# =============================================================================
# UNI-X VOICE TO VIDEO - PROMPTS CONFIGURATION v5.0 (AI PRODUCTION DIRECTOR)
# =============================================================================
# Theo chuan AI Production Director voi 3-Step Workflow:
# - Step 1: PACING & SLICING (segment text 8-20 words)
# - Step 2: DIRECTOR'S VISUAL BLUEPRINT (scene direction)
# - Step 3: PRODUCTION EXECUTION (assets + scene JSON)
#
# OUTPUT: JSON thuan, de parse va su dung
# =============================================================================

# =============================================================================
# GLOBAL STYLE DEFINITION (MASTER STRING - PASTE NGUYEN VAN)
# =============================================================================

global_style_string: "Cinematic, 4K photorealistic, shot on Arri Alexa, soft film grain, High Key Lighting, Balanced Exposure, well-lit, soft fill light, no crushing shadows, highly detailed texture, professional color grading"

visual_clarity_string: "Face illuminated by soft volumetric light, clear facial features, high visibility"

negative_prompt_string: "cartoon, 3d render, text, watermark, bad anatomy, distorted face, very dark image, underexposed, wrong face, different character, inconsistent appearance"

# =============================================================================
# STEP 1 + 2: ANALYZE STORY (Character Bible + Location Bible + Pacing)
# =============================================================================
# Input: {story_text}
# Output: JSON voi characters, locations, va pacing script
# =============================================================================

analyze_story: |
  Ban la AI Production Director. Phan tich kich ban va tao Production Kit.

  ## INPUT SCRIPT:
  ---
  {story_text}
  ---

  ## NHIEM VU:

  ### A. PACING & SLICING (Chia script thanh scenes)
  - Moi scene: 8-20 tu
  - [NARRATIVE]: 8-12 tu (binh thuong)
  - [EMPHASIS]: 13-16 tu (quan trong)
  - [PIVOTAL]: 17-20 tu (cao trao)
  - Neu co bao luc/action phuc tap: TACH thanh 2 scene (Cause + Effect)

  ### B. CHARACTER BIBLE (Tao reference cho nhan vat)
  Moi nhan vat can:
  - portrait_prompt: Anh reference (white background, neutral face, studio lighting)
  - character_lock: Mo ta ngan gon de paste vao moi scene

  ### C. LOCATION BIBLE (Tao reference cho boi canh)
  Moi location can:
  - location_prompt: Anh reference boi canh (empty, no people)
  - location_lock: Mo ta ngan gon de paste vao moi scene

  ### D. KEY OBJECTS (Cac vat the quan trong)
  - object_prompt: Anh reference vat the

  ## OUTPUT FORMAT - PURE JSON (khong markdown):

  {{
    "production_info": {{
      "title": "Ten cau chuyen",
      "genre": "Drama/Comedy/etc",
      "total_scenes": 15,
      "total_characters": 3,
      "total_locations": 2
    }},

    "global_style": "Cinematic, 4K photorealistic, shot on Arri Alexa, soft film grain, High Key Lighting, Balanced Exposure, well-lit, soft fill light, no crushing shadows, highly detailed texture, professional color grading",

    "pacing_script": [
      {{"id": 1, "type": "NARRATIVE", "text": "Original text segment here", "word_count": 10}},
      {{"id": 2, "type": "EMPHASIS", "text": "Another segment with more words", "word_count": 14}},
      {{"id": 3, "type": "PIVOTAL", "text": "The climactic moment of the story unfolds dramatically", "word_count": 18}}
    ],

    "characters": [
      {{
        "id": "nv1",
        "name": "Minh",
        "role": "main",
        "age": 32,
        "is_child": false,
        "filename": "nv1.jpg",
        "portrait_prompt": "A cinematic portrait, straight-on medium close-up shot on 85mm portrait lens. Subject is a 32-year-old Vietnamese man with short black side-parted hair, oval face, double eyelids, light tan skin. Looking directly at camera with completely neutral expression. Bright, even studio lighting, fully illuminated face. Pure white studio background. Wearing plain navy polo shirt. 8K, sharp focus, high fidelity portraiture, photorealistic.",
        "character_lock": "32-year-old Vietnamese man with short black side-parted hair, oval face, light tan skin"
      }},
      {{
        "id": "nv2",
        "name": "Lan",
        "role": "supporting",
        "age": 30,
        "is_child": false,
        "filename": "nv2.jpg",
        "portrait_prompt": "A cinematic portrait, straight-on medium close-up shot on 85mm portrait lens. Subject is a 30-year-old Vietnamese woman with long straight black center-parted hair, round face, fair skin, rosy cheeks. Looking directly at camera with completely neutral expression. Bright, even studio lighting, fully illuminated face. Pure white studio background. Wearing cream-colored blouse. 8K, sharp focus, high fidelity portraiture, photorealistic.",
        "character_lock": "30-year-old Vietnamese woman with long straight black center-parted hair, round face, fair skin"
      }},
      {{
        "id": "nv_child",
        "name": "Bao",
        "role": "supporting",
        "age": 8,
        "is_child": true,
        "filename": "NONE",
        "portrait_prompt": "DO_NOT_GENERATE",
        "character_lock": "8-year-old Vietnamese boy with short black hair, round chubby face"
      }}
    ],

    "locations": [
      {{
        "id": "loc1",
        "name": "Phong khach",
        "filename": "loc1.jpg",
        "location_prompt": "Interior wide shot of modern Vietnamese apartment living room. Empty room, no people. Beige leather sofa, wooden coffee table, large window with city view, warm afternoon sunlight streaming in, minimalist decor, potted plants, cream-colored walls. Cinematic, 4K photorealistic, well-lit, soft natural lighting. 8K, architectural photography style.",
        "location_lock": "Modern apartment living room, beige sofa, wooden coffee table, large window with city view, warm afternoon sunlight",
        "lighting_default": "Warm natural window light from the right"
      }},
      {{
        "id": "loc2",
        "name": "Van phong",
        "filename": "loc2.jpg",
        "location_prompt": "Interior wide shot of corporate office space. Empty room, no people. Glass partitions, fluorescent ceiling lights, computer monitors on desks, ergonomic office chairs, neutral gray carpet, modern minimalist design. Cinematic, 4K photorealistic, well-lit. 8K, architectural photography style.",
        "location_lock": "Corporate office space, glass partitions, fluorescent lights, computer monitors, gray carpet",
        "lighting_default": "Cool blue-white fluorescent overhead lighting"
      }}
    ],

    "key_objects": [
      {{
        "id": "obj1",
        "name": "Wedding Ring",
        "filename": "obj1.jpg",
        "object_prompt": "Extreme macro close-up of a simple gold wedding band with slight wear marks, sitting on white marble surface. Soft diffused studio lighting from above. Shallow depth of field. 8K, product photography style, photorealistic."
      }}
    ]
  }}

  ## QUY TAC:
  1. portrait_prompt: PHAI co "Pure white studio background", "neutral expression", "looking directly at camera"
  2. location_prompt: PHAI co "Empty room, no people"
  3. Tre em (is_child=true): portrait_prompt = "DO_NOT_GENERATE", filename = "NONE"
  4. Chi tra ve JSON thuan, KHONG co markdown code block

# =============================================================================
# STEP 3: SCENE PRODUCTION (Tao prompt cho tung scene)
# =============================================================================
# Input: {characters_info}, {locations_info}, {pacing_script}, {global_style}
# Output: JSON array cua scenes
# =============================================================================

generate_scenes: |
  Ban la AI Production Director. Tao visual prompt cho tung scene.

  ## NGUYEN TAC BAT BUOC:

  ### 1. GOLDEN RULE: 1 Pacing Line = 1 Scene
  - KHONG gop nhieu line thanh 1 scene
  - KHONG tach 1 line thanh nhieu scene

  ### 2. VISUAL CLARITY PROTOCOL:
  - LUON them: "Face illuminated by soft volumetric light, clear facial features, high visibility"
  - Sau mo ta nhan vat, TRUOC mo ta boi canh

  ### 3. GLOBAL STYLE INJECTION:
  - KHONG dung placeholder "[GLOBAL_STYLE]"
  - PHAI paste NGUYEN VAN: "Cinematic, 4K photorealistic, shot on Arri Alexa, soft film grain, High Key Lighting, Balanced Exposure, well-lit, soft fill light, no crushing shadows, highly detailed texture, professional color grading"

  ### 4. COMPLETE SCENE INDEPENDENCE:
  - Moi scene PHAI doc lap 100%
  - KHONG viet "same as Scene X" hay "nhu truoc"
  - Mo ta DAY DU: character + outfit + location + lighting

  ### 5. CAMERA ANGLE PROTOCOL:
  - Moi scene PHAI co goc may cu the: Eye-level, Low angle, High angle, Dutch tilt, OTS
  - Neu 2+ nhan vat: Mo ta vi tri tuong doi

  ### 6. SCENE LABELING:
  - visual_prompt BAT DAU bang "Scene [number]: "

  ## INPUT DATA:
  **GLOBAL_STYLE:** {global_style}
  **CHARACTERS:** {characters_info}
  **LOCATIONS:** {locations_info}
  **PACING_SCRIPT:** {pacing_script}

  ## OUTPUT FORMAT - MOI SCENE LA 1 JSON OBJECT:

  {{"scene_number": "Scene 1", "visual_prompt": "Scene 1: Eye-level, 85mm portrait lens. Minh, a 32-year-old Vietnamese man with short black side-parted hair, oval face, light tan skin, wearing navy blue polo shirt, dark gray slacks. Face illuminated by soft volumetric light, clear facial features, high visibility. He stands by the window looking out pensively. Modern apartment living room, beige sofa, wooden coffee table, large window with city view, warm afternoon sunlight. Cinematic, 4K photorealistic, shot on Arri Alexa, soft film grain, High Key Lighting, Balanced Exposure, well-lit, soft fill light, no crushing shadows, highly detailed texture, professional color grading.", "motion_prompt": "Slow dolly in. Minh remains still, gazing out the window. Dust particles float in the sunlight.", "reference_files": ["nv1.jpg", "loc1.jpg"], "technical_specs": {{"aspect_ratio": "16:9", "shot_type": "Medium Shot", "lens_type": "85mm", "camera_angle": "Eye-level"}}, "negative_prompt": "cartoon, 3d render, text, watermark, bad anatomy, distorted face, very dark image, wrong face, different character"}}
  {{"scene_number": "Scene 2", "visual_prompt": "Scene 2: Over-the-shoulder shot, 50mm lens, eye-level. In sharp focus: Minh, a 32-year-old Vietnamese man with short black side-parted hair, oval face, light tan skin, wearing navy blue polo shirt, sitting on beige sofa, speaking with engaged expression. Face illuminated by soft volumetric light, clear facial features, high visibility. In soft focus foreground: back of head of Lan, a 30-year-old Vietnamese woman with long straight black center-parted hair, wearing light pink cardigan. Two people on sofa facing each other. Modern apartment living room, warm afternoon window light from the left. Cinematic, 4K photorealistic, shot on Arri Alexa, soft film grain, High Key Lighting, Balanced Exposure, well-lit, soft fill light, no crushing shadows, highly detailed texture, professional color grading.", "motion_prompt": "Static shot with subtle handheld drift. Minh gestures while speaking. Natural micro-movements.", "reference_files": ["nv1.jpg", "nv2.jpg", "loc1.jpg"], "technical_specs": {{"aspect_ratio": "16:9", "shot_type": "Over-the-shoulder", "lens_type": "50mm", "camera_angle": "Eye-level"}}, "negative_prompt": "cartoon, 3d render, wrong characters, different hair color, different clothing, missing person, extra people"}}
  {{"scene_number": "Scene 3", "visual_prompt": "Scene 3: Close-up, 100mm macro lens. Minh's hands in navy polo shirt sleeves, wedding ring visible on left hand. Face illuminated by soft volumetric light. Hands clench into tight fists, knuckles whitening. Modern apartment living room, warm afternoon lighting. Cinematic, 4K photorealistic, shot on Arri Alexa, soft film grain, High Key Lighting, Balanced Exposure, well-lit, soft fill light, no crushing shadows, highly detailed texture, professional color grading.", "motion_prompt": "The hands slowly tighten into fists, knuckles whitening with tension, wedding ring catching light.", "reference_files": ["nv1.jpg", "loc1.jpg", "obj1.jpg"], "technical_specs": {{"aspect_ratio": "16:9", "shot_type": "Close Up", "lens_type": "100mm", "camera_angle": "Eye-level"}}, "negative_prompt": "cartoon, 3d render, text, watermark, bad anatomy"}}

  ## SHOT TYPE ROTATION:
  - Establishing/Intro: Wide Shot, Extreme Wide
  - Dialogue: Medium Shot, Over-the-shoulder
  - Emotion/Reaction: Close-up, Medium Close-up
  - Tension/Drama: Dutch Angle, Low Angle, ECU
  - Action: Tracking shot, Wide with movement

  ## CHECKLIST:
  [ ] Scene number trong visual_prompt?
  [ ] Character_lock CHINH XAC (tuoi, toc, mat, da)?
  [ ] "Face illuminated by soft volumetric light" sau nhan vat?
  [ ] Location_lock CHINH XAC?
  [ ] Global style NGUYEN VAN (khong placeholder)?
  [ ] reference_files day du (nhan vat + location)?
  [ ] Goc may cu the?
  [ ] Vi tri nhan vat neu 2+ nguoi?

  OUTPUT: Moi scene 1 dong JSON, KHONG co markdown.

# =============================================================================
# CAMERA REFERENCE
# =============================================================================

camera_reference:
  shot_types:
    "Extreme Wide Shot (EWS)": "Environment dominant, tiny subject"
    "Wide Shot (WS)": "Full body + environment"
    "Medium Shot (MS)": "Waist up"
    "Medium Close-up (MCU)": "Chest up"
    "Close-up (CU)": "Face fills frame"
    "Extreme Close-up (ECU)": "Part of face/detail"
    "Over-the-shoulder (OTS)": "Behind one person looking at another"
    "Two-shot": "Two people in frame"

  angles:
    "Eye-level": "Neutral, viewer = observer"
    "Low angle": "Subject has power, heroic"
    "High angle": "Subject vulnerable, small"
    "Dutch tilt": "Unease, tension"
    "Over-the-shoulder": "Connection, conversation"

  lenses:
    "24mm": "Wide - Establishing, environments"
    "35mm": "Wide normal - Full body, groups"
    "50mm": "Normal - Dialogue, versatile"
    "85mm": "Portrait - Face detail, interviews"
    "100mm": "Macro - Details, hands, objects"

# =============================================================================
# END v5.0
# =============================================================================
