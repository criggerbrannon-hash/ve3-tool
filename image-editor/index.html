<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VE3 Image Editor - Photoshop-like Editor</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Top Menu Bar -->
    <div class="menu-bar">
        <div class="menu-item" data-menu="file">
            <span>File</span>
            <div class="dropdown-menu">
                <div class="menu-option" id="newFile"><i class="fas fa-file"></i> New <span class="shortcut">Ctrl+N</span></div>
                <div class="menu-option" id="openFile"><i class="fas fa-folder-open"></i> Open <span class="shortcut">Ctrl+O</span></div>
                <div class="menu-separator"></div>
                <div class="menu-option" id="saveFile"><i class="fas fa-save"></i> Save <span class="shortcut">Ctrl+S</span></div>
                <div class="menu-option" id="saveAs"><i class="fas fa-file-export"></i> Save As... <span class="shortcut">Ctrl+Shift+S</span></div>
                <div class="menu-option" id="exportFile"><i class="fas fa-file-image"></i> Export <span class="shortcut">Ctrl+E</span></div>
            </div>
        </div>
        <div class="menu-item" data-menu="edit">
            <span>Edit</span>
            <div class="dropdown-menu">
                <div class="menu-option" id="undo"><i class="fas fa-undo"></i> Undo <span class="shortcut">Ctrl+Z</span></div>
                <div class="menu-option" id="redo"><i class="fas fa-redo"></i> Redo <span class="shortcut">Ctrl+Y</span></div>
                <div class="menu-separator"></div>
                <div class="menu-option" id="cut"><i class="fas fa-cut"></i> Cut <span class="shortcut">Ctrl+X</span></div>
                <div class="menu-option" id="copy"><i class="fas fa-copy"></i> Copy <span class="shortcut">Ctrl+C</span></div>
                <div class="menu-option" id="paste"><i class="fas fa-paste"></i> Paste <span class="shortcut">Ctrl+V</span></div>
                <div class="menu-separator"></div>
                <div class="menu-option" id="selectAll"><i class="fas fa-object-group"></i> Select All <span class="shortcut">Ctrl+A</span></div>
                <div class="menu-option" id="deselect"><i class="fas fa-object-ungroup"></i> Deselect <span class="shortcut">Ctrl+D</span></div>
            </div>
        </div>
        <div class="menu-item" data-menu="image">
            <span>Image</span>
            <div class="dropdown-menu">
                <div class="menu-option" id="imageSize"><i class="fas fa-expand-arrows-alt"></i> Image Size...</div>
                <div class="menu-option" id="canvasSize"><i class="fas fa-crop-alt"></i> Canvas Size...</div>
                <div class="menu-separator"></div>
                <div class="menu-option" id="rotateLeft"><i class="fas fa-rotate-left"></i> Rotate 90° Left</div>
                <div class="menu-option" id="rotateRight"><i class="fas fa-rotate-right"></i> Rotate 90° Right</div>
                <div class="menu-option" id="flipH"><i class="fas fa-arrows-left-right"></i> Flip Horizontal</div>
                <div class="menu-option" id="flipV"><i class="fas fa-arrows-up-down"></i> Flip Vertical</div>
            </div>
        </div>
        <div class="menu-item" data-menu="filter">
            <span>Filter</span>
            <div class="dropdown-menu">
                <div class="menu-option" id="filterBlur"><i class="fas fa-water"></i> Blur...</div>
                <div class="menu-option" id="filterSharpen"><i class="fas fa-bolt"></i> Sharpen</div>
                <div class="menu-option" id="filterNoise"><i class="fas fa-random"></i> Add Noise...</div>
                <div class="menu-separator"></div>
                <div class="menu-option" id="filterGrayscale"><i class="fas fa-adjust"></i> Grayscale</div>
                <div class="menu-option" id="filterSepia"><i class="fas fa-image"></i> Sepia</div>
                <div class="menu-option" id="filterInvert"><i class="fas fa-exchange-alt"></i> Invert Colors</div>
                <div class="menu-separator"></div>
                <div class="menu-option" id="filterVignette"><i class="fas fa-circle"></i> Vignette</div>
                <div class="menu-option" id="filterPixelate"><i class="fas fa-th"></i> Pixelate...</div>
            </div>
        </div>
        <div class="menu-item" data-menu="view">
            <span>View</span>
            <div class="dropdown-menu">
                <div class="menu-option" id="zoomIn"><i class="fas fa-search-plus"></i> Zoom In <span class="shortcut">Ctrl++</span></div>
                <div class="menu-option" id="zoomOut"><i class="fas fa-search-minus"></i> Zoom Out <span class="shortcut">Ctrl+-</span></div>
                <div class="menu-option" id="zoomFit"><i class="fas fa-compress-arrows-alt"></i> Fit to Screen</div>
                <div class="menu-option" id="zoom100"><i class="fas fa-equals"></i> 100%</div>
                <div class="menu-separator"></div>
                <div class="menu-option" id="toggleGrid"><i class="fas fa-border-all"></i> Toggle Grid</div>
                <div class="menu-option" id="toggleRulers"><i class="fas fa-ruler-combined"></i> Toggle Rulers</div>
            </div>
        </div>
        <div class="menu-item" data-menu="help">
            <span>Help</span>
            <div class="dropdown-menu">
                <div class="menu-option" id="shortcuts"><i class="fas fa-keyboard"></i> Keyboard Shortcuts</div>
                <div class="menu-option" id="about"><i class="fas fa-info-circle"></i> About</div>
            </div>
        </div>
        <div class="menu-spacer"></div>
        <div class="zoom-display">
            <span id="zoomLevel">100%</span>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Toolbar -->
        <div class="toolbar" id="toolbar">
            <div class="tool-group">
                <button class="tool-btn active" data-tool="move" title="Move Tool (V)">
                    <i class="fas fa-arrows-alt"></i>
                </button>
                <button class="tool-btn" data-tool="select-rect" title="Rectangle Select (M)">
                    <i class="fas fa-vector-square"></i>
                </button>
                <button class="tool-btn" data-tool="select-ellipse" title="Ellipse Select (M)">
                    <i class="far fa-circle"></i>
                </button>
                <button class="tool-btn" data-tool="lasso" title="Lasso Tool (L)">
                    <i class="fas fa-draw-polygon"></i>
                </button>
                <button class="tool-btn" data-tool="magic-wand" title="Magic Wand (W)">
                    <i class="fas fa-magic"></i>
                </button>
            </div>
            <div class="tool-separator"></div>
            <div class="tool-group">
                <button class="tool-btn" data-tool="crop" title="Crop Tool (C)">
                    <i class="fas fa-crop"></i>
                </button>
                <button class="tool-btn" data-tool="eyedropper" title="Eyedropper (I)">
                    <i class="fas fa-eye-dropper"></i>
                </button>
            </div>
            <div class="tool-separator"></div>
            <div class="tool-group">
                <button class="tool-btn" data-tool="brush" title="Brush Tool (B)">
                    <i class="fas fa-paint-brush"></i>
                </button>
                <button class="tool-btn" data-tool="pencil" title="Pencil Tool (N)">
                    <i class="fas fa-pencil-alt"></i>
                </button>
                <button class="tool-btn" data-tool="eraser" title="Eraser Tool (E)">
                    <i class="fas fa-eraser"></i>
                </button>
                <button class="tool-btn" data-tool="fill" title="Paint Bucket (G)">
                    <i class="fas fa-fill-drip"></i>
                </button>
                <button class="tool-btn" data-tool="gradient" title="Gradient Tool (G)">
                    <i class="fas fa-palette"></i>
                </button>
            </div>
            <div class="tool-separator"></div>
            <div class="tool-group">
                <button class="tool-btn" data-tool="clone" title="Clone Stamp (S)">
                    <i class="fas fa-stamp"></i>
                </button>
                <button class="tool-btn" data-tool="blur-tool" title="Blur Tool">
                    <i class="fas fa-water"></i>
                </button>
                <button class="tool-btn" data-tool="sharpen-tool" title="Sharpen Tool">
                    <i class="fas fa-bolt"></i>
                </button>
                <button class="tool-btn" data-tool="smudge" title="Smudge Tool">
                    <i class="fas fa-hand-pointer"></i>
                </button>
            </div>
            <div class="tool-separator"></div>
            <div class="tool-group">
                <button class="tool-btn" data-tool="text" title="Text Tool (T)">
                    <i class="fas fa-font"></i>
                </button>
                <button class="tool-btn" data-tool="shape-rect" title="Rectangle Shape (U)">
                    <i class="far fa-square"></i>
                </button>
                <button class="tool-btn" data-tool="shape-ellipse" title="Ellipse Shape (U)">
                    <i class="far fa-circle"></i>
                </button>
                <button class="tool-btn" data-tool="shape-line" title="Line Tool (U)">
                    <i class="fas fa-minus"></i>
                </button>
            </div>
            <div class="tool-separator"></div>
            <div class="tool-group">
                <button class="tool-btn" data-tool="hand" title="Hand Tool (H)">
                    <i class="fas fa-hand-paper"></i>
                </button>
                <button class="tool-btn" data-tool="zoom" title="Zoom Tool (Z)">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <div class="tool-separator"></div>
            <div class="color-picker-group">
                <div class="color-picker-container">
                    <div class="color-box" id="foregroundColor" style="background-color: #000000;" title="Foreground Color"></div>
                    <div class="color-box" id="backgroundColor" style="background-color: #ffffff;" title="Background Color"></div>
                    <button class="swap-colors" id="swapColors" title="Swap Colors (X)">
                        <i class="fas fa-exchange-alt"></i>
                    </button>
                    <button class="reset-colors" id="resetColors" title="Reset Colors (D)">
                        <i class="fas fa-undo"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Tool Options Bar -->
        <div class="tool-options-bar" id="toolOptionsBar">
            <!-- Brush Options -->
            <div class="tool-options brush-options" id="brushOptions">
                <label>Size:</label>
                <input type="range" id="brushSize" min="1" max="200" value="10">
                <span id="brushSizeValue">10px</span>
                <label>Hardness:</label>
                <input type="range" id="brushHardness" min="0" max="100" value="100">
                <span id="brushHardnessValue">100%</span>
                <label>Opacity:</label>
                <input type="range" id="brushOpacity" min="1" max="100" value="100">
                <span id="brushOpacityValue">100%</span>
                <label>Flow:</label>
                <input type="range" id="brushFlow" min="1" max="100" value="100">
                <span id="brushFlowValue">100%</span>
            </div>
            <!-- Eraser Options -->
            <div class="tool-options eraser-options" id="eraserOptions" style="display: none;">
                <label>Size:</label>
                <input type="range" id="eraserSize" min="1" max="200" value="20">
                <span id="eraserSizeValue">20px</span>
                <label>Hardness:</label>
                <input type="range" id="eraserHardness" min="0" max="100" value="100">
                <span id="eraserHardnessValue">100%</span>
                <label>Opacity:</label>
                <input type="range" id="eraserOpacity" min="1" max="100" value="100">
                <span id="eraserOpacityValue">100%</span>
            </div>
            <!-- Text Options -->
            <div class="tool-options text-options" id="textOptions" style="display: none;">
                <label>Font:</label>
                <select id="fontFamily">
                    <option value="Arial">Arial</option>
                    <option value="Helvetica">Helvetica</option>
                    <option value="Times New Roman">Times New Roman</option>
                    <option value="Georgia">Georgia</option>
                    <option value="Verdana">Verdana</option>
                    <option value="Courier New">Courier New</option>
                    <option value="Impact">Impact</option>
                </select>
                <label>Size:</label>
                <input type="number" id="fontSize" value="24" min="1" max="500">
                <button class="text-style-btn" id="boldBtn" title="Bold"><i class="fas fa-bold"></i></button>
                <button class="text-style-btn" id="italicBtn" title="Italic"><i class="fas fa-italic"></i></button>
                <button class="text-style-btn" id="underlineBtn" title="Underline"><i class="fas fa-underline"></i></button>
            </div>
            <!-- Shape Options -->
            <div class="tool-options shape-options" id="shapeOptions" style="display: none;">
                <label>Fill:</label>
                <input type="checkbox" id="shapeFill" checked>
                <label>Stroke:</label>
                <input type="checkbox" id="shapeStroke">
                <label>Stroke Width:</label>
                <input type="number" id="shapeStrokeWidth" value="2" min="1" max="50">
            </div>
            <!-- Selection Options -->
            <div class="tool-options selection-options" id="selectionOptions" style="display: none;">
                <label>Feather:</label>
                <input type="range" id="selectionFeather" min="0" max="50" value="0">
                <span id="selectionFeatherValue">0px</span>
                <button class="selection-btn" id="selectInverse">Inverse</button>
            </div>
            <!-- Magic Wand Options -->
            <div class="tool-options wand-options" id="wandOptions" style="display: none;">
                <label>Tolerance:</label>
                <input type="range" id="wandTolerance" min="0" max="255" value="32">
                <span id="wandToleranceValue">32</span>
                <label><input type="checkbox" id="wandContiguous" checked> Contiguous</label>
            </div>
        </div>

        <!-- Canvas Area -->
        <div class="canvas-container" id="canvasContainer">
            <div class="ruler horizontal" id="rulerH"></div>
            <div class="ruler vertical" id="rulerV"></div>
            <div class="canvas-wrapper" id="canvasWrapper">
                <canvas id="mainCanvas"></canvas>
                <canvas id="overlayCanvas"></canvas>
            </div>
        </div>

        <!-- Right Panel -->
        <div class="right-panel" id="rightPanel">
            <!-- Navigator Panel -->
            <div class="panel" id="navigatorPanel">
                <div class="panel-header">
                    <span>Navigator</span>
                    <button class="panel-toggle"><i class="fas fa-chevron-down"></i></button>
                </div>
                <div class="panel-content">
                    <canvas id="navigatorCanvas"></canvas>
                    <div class="zoom-controls">
                        <button id="navZoomOut"><i class="fas fa-minus"></i></button>
                        <input type="range" id="navZoomSlider" min="10" max="500" value="100">
                        <button id="navZoomIn"><i class="fas fa-plus"></i></button>
                    </div>
                </div>
            </div>

            <!-- Color Panel -->
            <div class="panel" id="colorPanel">
                <div class="panel-header">
                    <span>Color</span>
                    <button class="panel-toggle"><i class="fas fa-chevron-down"></i></button>
                </div>
                <div class="panel-content">
                    <div class="color-picker-main">
                        <canvas id="colorWheel" width="150" height="150"></canvas>
                        <canvas id="colorBrightness" width="20" height="150"></canvas>
                    </div>
                    <div class="color-inputs">
                        <div class="color-input-row">
                            <label>H:</label><input type="number" id="colorH" min="0" max="360" value="0">
                            <label>R:</label><input type="number" id="colorR" min="0" max="255" value="0">
                        </div>
                        <div class="color-input-row">
                            <label>S:</label><input type="number" id="colorS" min="0" max="100" value="0">
                            <label>G:</label><input type="number" id="colorG" min="0" max="255" value="0">
                        </div>
                        <div class="color-input-row">
                            <label>B:</label><input type="number" id="colorB" min="0" max="100" value="0">
                            <label>B:</label><input type="number" id="colorBl" min="0" max="255" value="0">
                        </div>
                        <div class="color-input-row">
                            <label>#</label><input type="text" id="colorHex" value="000000" maxlength="6">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Swatches Panel -->
            <div class="panel" id="swatchesPanel">
                <div class="panel-header">
                    <span>Swatches</span>
                    <button class="panel-toggle"><i class="fas fa-chevron-down"></i></button>
                </div>
                <div class="panel-content">
                    <div class="swatches-grid" id="swatchesGrid"></div>
                </div>
            </div>

            <!-- Layers Panel -->
            <div class="panel" id="layersPanel">
                <div class="panel-header">
                    <span>Layers</span>
                    <button class="panel-toggle"><i class="fas fa-chevron-down"></i></button>
                </div>
                <div class="panel-content">
                    <div class="layer-blend-mode">
                        <select id="blendMode">
                            <option value="normal">Normal</option>
                            <option value="multiply">Multiply</option>
                            <option value="screen">Screen</option>
                            <option value="overlay">Overlay</option>
                            <option value="darken">Darken</option>
                            <option value="lighten">Lighten</option>
                            <option value="color-dodge">Color Dodge</option>
                            <option value="color-burn">Color Burn</option>
                            <option value="hard-light">Hard Light</option>
                            <option value="soft-light">Soft Light</option>
                            <option value="difference">Difference</option>
                            <option value="exclusion">Exclusion</option>
                            <option value="hue">Hue</option>
                            <option value="saturation">Saturation</option>
                            <option value="color">Color</option>
                            <option value="luminosity">Luminosity</option>
                        </select>
                        <label>Opacity:</label>
                        <input type="range" id="layerOpacity" min="0" max="100" value="100">
                        <span id="layerOpacityValue">100%</span>
                    </div>
                    <div class="layers-list" id="layersList"></div>
                    <div class="layers-actions">
                        <button id="addLayer" title="New Layer"><i class="fas fa-plus"></i></button>
                        <button id="addLayerGroup" title="New Group"><i class="fas fa-folder-plus"></i></button>
                        <button id="duplicateLayer" title="Duplicate Layer"><i class="fas fa-copy"></i></button>
                        <button id="mergeLayer" title="Merge Down"><i class="fas fa-compress-alt"></i></button>
                        <button id="deleteLayer" title="Delete Layer"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
            </div>

            <!-- History Panel -->
            <div class="panel" id="historyPanel">
                <div class="panel-header">
                    <span>History</span>
                    <button class="panel-toggle"><i class="fas fa-chevron-down"></i></button>
                </div>
                <div class="panel-content">
                    <div class="history-list" id="historyList"></div>
                </div>
            </div>

            <!-- Adjustments Panel -->
            <div class="panel" id="adjustmentsPanel">
                <div class="panel-header">
                    <span>Adjustments</span>
                    <button class="panel-toggle"><i class="fas fa-chevron-down"></i></button>
                </div>
                <div class="panel-content">
                    <div class="adjustment-buttons">
                        <button class="adj-btn" data-adj="brightness-contrast" title="Brightness/Contrast">
                            <i class="fas fa-sun"></i>
                        </button>
                        <button class="adj-btn" data-adj="levels" title="Levels">
                            <i class="fas fa-sliders-h"></i>
                        </button>
                        <button class="adj-btn" data-adj="curves" title="Curves">
                            <i class="fas fa-bezier-curve"></i>
                        </button>
                        <button class="adj-btn" data-adj="hue-saturation" title="Hue/Saturation">
                            <i class="fas fa-palette"></i>
                        </button>
                        <button class="adj-btn" data-adj="color-balance" title="Color Balance">
                            <i class="fas fa-balance-scale"></i>
                        </button>
                        <button class="adj-btn" data-adj="vibrance" title="Vibrance">
                            <i class="fas fa-tint"></i>
                        </button>
                        <button class="adj-btn" data-adj="exposure" title="Exposure">
                            <i class="fas fa-camera"></i>
                        </button>
                        <button class="adj-btn" data-adj="shadows-highlights" title="Shadows/Highlights">
                            <i class="fas fa-adjust"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
        <span id="statusInfo">Ready</span>
        <span id="cursorPos">X: 0 Y: 0</span>
        <span id="imageSize">0 x 0</span>
        <span id="fileSize">0 KB</span>
    </div>

    <!-- Modal Dialogs -->
    <div class="modal" id="newFileModal">
        <div class="modal-content">
            <div class="modal-header">
                <span>New Document</span>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <label>Width:</label>
                    <input type="number" id="newWidth" value="1920">
                    <select id="newWidthUnit">
                        <option value="px">Pixels</option>
                        <option value="in">Inches</option>
                        <option value="cm">CM</option>
                    </select>
                </div>
                <div class="form-row">
                    <label>Height:</label>
                    <input type="number" id="newHeight" value="1080">
                    <select id="newHeightUnit">
                        <option value="px">Pixels</option>
                        <option value="in">Inches</option>
                        <option value="cm">CM</option>
                    </select>
                </div>
                <div class="form-row">
                    <label>Resolution:</label>
                    <input type="number" id="newResolution" value="72">
                    <span>PPI</span>
                </div>
                <div class="form-row">
                    <label>Background:</label>
                    <select id="newBackground">
                        <option value="white">White</option>
                        <option value="black">Black</option>
                        <option value="transparent">Transparent</option>
                        <option value="custom">Custom Color</option>
                    </select>
                </div>
                <div class="presets">
                    <span>Presets:</span>
                    <button class="preset-btn" data-w="1920" data-h="1080">1080p</button>
                    <button class="preset-btn" data-w="3840" data-h="2160">4K</button>
                    <button class="preset-btn" data-w="1080" data-h="1080">Instagram</button>
                    <button class="preset-btn" data-w="1200" data-h="628">Facebook</button>
                    <button class="preset-btn" data-w="800" data-h="600">Web</button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-cancel">Cancel</button>
                <button class="btn btn-primary" id="createNewFile">Create</button>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div class="modal" id="exportModal">
        <div class="modal-content">
            <div class="modal-header">
                <span>Export Image</span>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <label>Format:</label>
                    <select id="exportFormat">
                        <option value="png">PNG</option>
                        <option value="jpeg">JPEG</option>
                        <option value="webp">WebP</option>
                    </select>
                </div>
                <div class="form-row" id="qualityRow">
                    <label>Quality:</label>
                    <input type="range" id="exportQuality" min="1" max="100" value="92">
                    <span id="exportQualityValue">92%</span>
                </div>
                <div class="form-row">
                    <label>Scale:</label>
                    <select id="exportScale">
                        <option value="1">1x (Original)</option>
                        <option value="0.5">0.5x</option>
                        <option value="2">2x</option>
                        <option value="3">3x</option>
                    </select>
                </div>
                <div class="export-preview">
                    <canvas id="exportPreview"></canvas>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-cancel">Cancel</button>
                <button class="btn btn-primary" id="exportImage">Export</button>
            </div>
        </div>
    </div>

    <!-- Adjustments Modal -->
    <div class="modal" id="adjustmentsModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <span id="adjustmentTitle">Adjustment</span>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="adjustment-preview">
                    <canvas id="adjustmentPreview"></canvas>
                </div>
                <div class="adjustment-controls" id="adjustmentControls"></div>
                <div class="adjustment-preview-toggle">
                    <label><input type="checkbox" id="previewAdjustment" checked> Preview</label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-cancel">Cancel</button>
                <button class="btn btn-primary" id="applyAdjustment">Apply</button>
            </div>
        </div>
    </div>

    <!-- Filter Modal -->
    <div class="modal" id="filterModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <span id="filterTitle">Filter</span>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="filter-preview">
                    <canvas id="filterPreview"></canvas>
                </div>
                <div class="filter-controls" id="filterControls"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-cancel">Cancel</button>
                <button class="btn btn-primary" id="applyFilter">Apply</button>
            </div>
        </div>
    </div>

    <!-- Image Size Modal -->
    <div class="modal" id="imageSizeModal">
        <div class="modal-content">
            <div class="modal-header">
                <span>Image Size</span>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <label>Width:</label>
                    <input type="number" id="resizeWidth" value="1920">
                    <span>px</span>
                </div>
                <div class="form-row">
                    <label>Height:</label>
                    <input type="number" id="resizeHeight" value="1080">
                    <span>px</span>
                </div>
                <div class="form-row">
                    <label><input type="checkbox" id="constrainProportions" checked> Constrain Proportions</label>
                </div>
                <div class="form-row">
                    <label>Resample:</label>
                    <select id="resampleMethod">
                        <option value="bilinear">Bilinear</option>
                        <option value="bicubic">Bicubic</option>
                        <option value="nearest">Nearest Neighbor</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-cancel">Cancel</button>
                <button class="btn btn-primary" id="applyResize">Apply</button>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div class="modal" id="aboutModal">
        <div class="modal-content">
            <div class="modal-header">
                <span>About VE3 Image Editor</span>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="about-content">
                    <h2>VE3 Image Editor</h2>
                    <p>Version 1.0.0</p>
                    <p>A powerful web-based image editor with Photoshop-like features.</p>
                    <h3>Features:</h3>
                    <ul>
                        <li>Layer-based editing</li>
                        <li>Professional drawing tools</li>
                        <li>Advanced filters and adjustments</li>
                        <li>Selection tools with feathering</li>
                        <li>Text with full formatting</li>
                        <li>Undo/Redo history</li>
                        <li>Multiple export formats</li>
                    </ul>
                    <p>&copy; 2024 VE3 Tools</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary modal-cancel">OK</button>
            </div>
        </div>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div class="modal" id="shortcutsModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <span>Keyboard Shortcuts</span>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="shortcuts-grid">
                    <div class="shortcut-group">
                        <h4>File</h4>
                        <div class="shortcut-item"><span>Ctrl + N</span> New Document</div>
                        <div class="shortcut-item"><span>Ctrl + O</span> Open Image</div>
                        <div class="shortcut-item"><span>Ctrl + S</span> Save</div>
                        <div class="shortcut-item"><span>Ctrl + E</span> Export</div>
                    </div>
                    <div class="shortcut-group">
                        <h4>Edit</h4>
                        <div class="shortcut-item"><span>Ctrl + Z</span> Undo</div>
                        <div class="shortcut-item"><span>Ctrl + Y</span> Redo</div>
                        <div class="shortcut-item"><span>Ctrl + X</span> Cut</div>
                        <div class="shortcut-item"><span>Ctrl + C</span> Copy</div>
                        <div class="shortcut-item"><span>Ctrl + V</span> Paste</div>
                        <div class="shortcut-item"><span>Ctrl + A</span> Select All</div>
                        <div class="shortcut-item"><span>Ctrl + D</span> Deselect</div>
                    </div>
                    <div class="shortcut-group">
                        <h4>Tools</h4>
                        <div class="shortcut-item"><span>V</span> Move Tool</div>
                        <div class="shortcut-item"><span>M</span> Selection Tool</div>
                        <div class="shortcut-item"><span>L</span> Lasso Tool</div>
                        <div class="shortcut-item"><span>W</span> Magic Wand</div>
                        <div class="shortcut-item"><span>C</span> Crop Tool</div>
                        <div class="shortcut-item"><span>I</span> Eyedropper</div>
                        <div class="shortcut-item"><span>B</span> Brush Tool</div>
                        <div class="shortcut-item"><span>E</span> Eraser</div>
                        <div class="shortcut-item"><span>G</span> Paint Bucket</div>
                        <div class="shortcut-item"><span>T</span> Text Tool</div>
                        <div class="shortcut-item"><span>H</span> Hand Tool</div>
                        <div class="shortcut-item"><span>Z</span> Zoom Tool</div>
                    </div>
                    <div class="shortcut-group">
                        <h4>View</h4>
                        <div class="shortcut-item"><span>Ctrl + +</span> Zoom In</div>
                        <div class="shortcut-item"><span>Ctrl + -</span> Zoom Out</div>
                        <div class="shortcut-item"><span>Ctrl + 0</span> Fit to Screen</div>
                        <div class="shortcut-item"><span>Ctrl + 1</span> 100% Zoom</div>
                    </div>
                    <div class="shortcut-group">
                        <h4>Colors</h4>
                        <div class="shortcut-item"><span>X</span> Swap Colors</div>
                        <div class="shortcut-item"><span>D</span> Reset Colors</div>
                    </div>
                    <div class="shortcut-group">
                        <h4>Brush</h4>
                        <div class="shortcut-item"><span>[ ]</span> Decrease/Increase Size</div>
                        <div class="shortcut-item"><span>{ }</span> Decrease/Increase Hardness</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary modal-cancel">OK</button>
            </div>
        </div>
    </div>

    <!-- Color Picker Modal -->
    <div class="modal" id="colorPickerModal">
        <div class="modal-content">
            <div class="modal-header">
                <span>Color Picker</span>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="color-picker-full">
                    <div class="color-picker-main-area">
                        <canvas id="colorPickerGradient" width="256" height="256"></canvas>
                        <div class="color-picker-cursor" id="colorPickerCursor"></div>
                    </div>
                    <div class="color-picker-hue">
                        <canvas id="colorPickerHue" width="20" height="256"></canvas>
                        <div class="color-picker-hue-cursor" id="colorPickerHueCursor"></div>
                    </div>
                    <div class="color-picker-preview-box">
                        <div class="color-preview-new" id="colorPreviewNew"></div>
                        <div class="color-preview-old" id="colorPreviewOld"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-cancel">Cancel</button>
                <button class="btn btn-primary" id="selectColor">OK</button>
            </div>
        </div>
    </div>

    <!-- Hidden File Input -->
    <input type="file" id="fileInput" accept="image/*" style="display: none;">

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/color.js"></script>
    <script src="js/layer.js"></script>
    <script src="js/history.js"></script>
    <script src="js/selection.js"></script>
    <script src="js/tools.js"></script>
    <script src="js/filters.js"></script>
    <script src="js/adjustments.js"></script>
    <script src="js/editor.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
